{{ define "main" }}
<section class="contact-page">
    <div class="container">
        <div class="page-header">
            <h1>{{ .Title }}</h1>
            <p class="page-description">Li√™n h·ªá v·ªõi t√¥i ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£ v√† t∆∞ v·∫•n v·ªÅ l·∫≠p tr√¨nh</p>
        </div>
        
        <div class="contact-content">
            <div class="contact-info">
                <div class="contact-card">
                    <h3>Th√¥ng tin li√™n h·ªá</h3>
                    <div class="contact-item">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                        </svg>
                        <a href="mailto:taansfast@email.com">taansfast@email.com</a>
                    </div>
                    <div class="contact-item">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        <a href="https://github.com/taansfast" target="_blank" rel="noopener">github.com/taansfast</a>
                    </div>
                    <div class="contact-item">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                        <a href="https://linkedin.com/in/taansfast" target="_blank" rel="noopener">linkedin.com/in/taansfast</a>
                    </div>
                    <div class="contact-item">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                        </svg>
                        <a href="https://twitter.com/taansfast_dev" target="_blank" rel="noopener">@taansfast_dev</a>
                    </div>
                </div>
                
                <div class="response-time">
                    <h3>Th·ªùi gian ph·∫£n h·ªìi</h3>
                    <p>üìß Email: 24-48 gi·ªù</p>
                    <p>üê¶ Twitter: 2-6 gi·ªù</p>
                    <p>üí¨ LinkedIn: 1-2 ng√†y</p>
                </div>
            </div>
            
            <div class="contact-form-container">
                <h3>G·ª≠i tin nh·∫Øn</h3>
                <form id="contactForm" class="contact-form" action="#" method="POST">
                    <div class="form-group">
                        <label for="name">H·ªç v√† t√™n *</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="subject">Ch·ªß ƒë·ªÅ</label>
                        <select id="subject" name="subject">
                            <option value="">Ch·ªçn ch·ªß ƒë·ªÅ</option>
                            <option value="question">C√¢u h·ªèi v·ªÅ l·∫≠p tr√¨nh</option>
                            <option value="collaboration">H·ª£p t√°c d·ª± √°n</option>
                            <option value="feedback">Ph·∫£n h·ªìi v·ªÅ blog</option>
                            <option value="other">Kh√°c</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="message">Tin nh·∫Øn *</label>
                        <textarea id="message" name="message" rows="6" required placeholder="H√£y chia s·∫ª c√¢u h·ªèi ho·∫∑c √Ω ki·∫øn c·ªßa b·∫°n..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn-submit">G·ª≠i tin nh·∫Øn</button>
                </form>
            </div>
        </div>
        
        <div class="faq-section">
            <h2>C√¢u h·ªèi th∆∞·ªùng g·∫∑p</h2>
            <div class="faq-grid">
                <div class="faq-item">
                    <h4>üíª T√¥i c√≥ th·ªÉ ƒë·∫∑t c√¢u h·ªèi v·ªÅ code kh√¥ng?</h4>
                    <p>C√≥! T√¥i r·∫•t s·∫µn l√≤ng gi√∫p ƒë·ª° c√°c b·∫°n debug code ho·∫∑c gi·∫£i th√≠ch c√°c kh√°i ni·ªám l·∫≠p tr√¨nh.</p>
                </div>
                <div class="faq-item">
                    <h4>ü§ù B·∫°n c√≥ nh·∫≠n h·ª£p t√°c d·ª± √°n kh√¥ng?</h4>
                    <p>T√¥i lu√¥n m·ªü c·ª≠a cho c√°c c∆° h·ªôi h·ª£p t√°c th√∫ v·ªã. H√£y li√™n h·ªá ƒë·ªÉ th·∫£o lu·∫≠n chi ti·∫øt.</p>
                </div>
                <div class="faq-item">
                    <h4>üìß L√†m sao ƒë·ªÉ ƒëƒÉng k√Ω nh·∫≠n tin t·ª©c m·ªõi?</h4>
                    <p>Hi·ªán t·∫°i t√¥i ch∆∞a c√≥ newsletter, nh∆∞ng b·∫°n c√≥ th·ªÉ theo d√µi blog ho·∫∑c follow t√¥i tr√™n social media.</p>
                </div>
                <div class="faq-item">
                    <h4>üéØ C√°c ch·ªß ƒë·ªÅ b·∫°n c√≥ th·ªÉ h·ªó tr·ª£?</h4>
                    <p>Java, JavaScript/TypeScript, Database, DevOps, Web Development v√† Career Advice.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
.contact-page {
    padding: 2rem 0;
    min-height: 80vh;
}

.page-header {
    text-align: center;
    margin-bottom: 3rem;
}

.page-header h1 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: var(--primary-color);
}

.page-description {
    font-size: 1.1rem;
    color: var(--text-muted);
    max-width: 600px;
    margin: 0 auto;
}

.contact-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    margin-bottom: 4rem;
}

.contact-card {
    background: var(--card-bg);
    padding: 2rem;
    border-radius: 12px;
    box-shadow: var(--shadow);
    margin-bottom: 2rem;
}

.contact-card h3 {
    margin-bottom: 1.5rem;
    color: var(--primary-color);
}

.contact-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
    padding: 0.75rem;
    background: var(--bg-secondary);
    border-radius: 8px;
    transition: all 0.3s ease;
}

.contact-item:hover {
    background: var(--primary-color);
    color: white;
    transform: translateX(5px);
}

.contact-item a {
    color: inherit;
    text-decoration: none;
    transition: color 0.3s ease;
}

.contact-item:hover a {
    color: white;
}

.contact-item svg {
    flex-shrink: 0;
}

.response-time {
    background: var(--card-bg);
    padding: 2rem;
    border-radius: 12px;
    box-shadow: var(--shadow);
}

.response-time h3 {
    margin-bottom: 1rem;
    color: var(--primary-color);
}

.response-time p {
    margin-bottom: 0.5rem;
    font-weight: 500;
}

.contact-form-container {
    background: var(--card-bg);
    padding: 2rem;
    border-radius: 12px;
    box-shadow: var(--shadow);
}

.contact-form-container h3 {
    margin-bottom: 1.5rem;
    color: var(--primary-color);
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: var(--text-primary);
}

.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    font-size: 1rem;
    transition: border-color 0.3s ease;
    background: var(--bg-primary);
    color: var(--text-primary);
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--primary-color);
}

.form-group textarea {
    resize: vertical;
    min-height: 120px;
}

.btn-submit {
    background: var(--primary-color);
    color: white;
    padding: 0.875rem 2rem;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
}

.btn-submit:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.faq-section {
    margin-top: 4rem;
}

.faq-section h2 {
    text-align: center;
    margin-bottom: 2rem;
    color: var(--primary-color);
}

.faq-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
}

.faq-item {
    background: var(--card-bg);
    padding: 1.5rem;
    border-radius: 12px;
    box-shadow: var(--shadow);
    transition: transform 0.3s ease;
}

.faq-item:hover {
    transform: translateY(-5px);
}

.faq-item h4 {
    margin-bottom: 0.75rem;
    color: var(--primary-color);
    font-size: 1.1rem;
}

.faq-item p {
    color: var(--text-secondary);
    line-height: 1.6;
}

/* Message styles */
.contact-message {
    margin: 1.5rem 0;
    padding: 1rem 1.5rem;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    animation: slideIn 0.3s ease-out;
}

.contact-message.success {
    background: #d1fae5;
    border: 1px solid #10b981;
    color: #065f46;
}

.contact-message.error {
    background: #fee2e2;
    border: 1px solid #ef4444;
    color: #991b1b;
}

.message-content {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex: 1;
}

.message-icon {
    font-size: 1.2rem;
}

.message-text {
    font-weight: 500;
}

.message-close {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: inherit;
    opacity: 0.7;
    transition: opacity 0.2s;
    padding: 0;
    margin-left: 1rem;
}

.message-close:hover {
    opacity: 1;
}

/* Field validation styles */
.form-group input.error,
.form-group textarea.error {
    border-color: #ef4444;
    background: #fef2f2;
}

.field-error {
    color: #ef4444;
    font-size: 0.875rem;
    margin-top: 0.25rem;
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.field-error::before {
    content: "‚ö†Ô∏è";
    font-size: 0.75rem;
}

/* Loading state */
.btn-submit:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    transform: none !important;
}

/* Animations */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Enhanced mobile experience */
@media (max-width: 768px) {
    .contact-content {
        grid-template-columns: 1fr;
        gap: 2rem;
    }
    
    .page-header h1 {
        font-size: 2rem;
    }
    
    .faq-grid {
        grid-template-columns: 1fr;
    }
    
    .contact-card,
    .contact-form-container,
    .response-time {
        padding: 1.5rem;
    }
    
    .form-group {
        margin-bottom: 1.25rem;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
        padding: 0.875rem;
        font-size: 16px; /* Prevent zoom on iOS */
    }
    
    .btn-submit {
        padding: 1rem 2rem;
        font-size: 1.1rem;
    }
    
    .contact-message {
        margin: 1rem 0;
        padding: 0.875rem 1rem;
    }
    
    .message-content {
        gap: 0.5rem;
    }
    
    .faq-item {
        padding: 1.25rem;
    }
    
    .faq-item h4 {
        font-size: 1rem;
    }
}

/* Tablet improvements */
@media (min-width: 769px) and (max-width: 1024px) {
    .contact-content {
        gap: 2.5rem;
    }
    
    .faq-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}
</style>

<script>
document.getElementById('contactForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const form = this;
    const submitBtn = form.querySelector('.btn-submit');
    const originalText = submitBtn.textContent;
    
    // Show loading state
    submitBtn.textContent = 'ƒêang g·ª≠i...';
    submitBtn.disabled = true;
    
    // Get form data
    const formData = new FormData(form);
    const data = {
        name: formData.get('name'),
        email: formData.get('email'),
        subject: formData.get('subject'),
        message: formData.get('message')
    };
    
    try {
        // Send to API
        const response = await fetch('/api/contact', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
        });
        
        const result = await response.json();
        
        if (result.success) {
            // Show success message
            showMessage('success', result.message);
            form.reset();
        } else {
            // Show validation errors
            if (result.errors && result.errors.length > 0) {
                showMessage('error', result.errors.join('<br>'));
            } else {
                showMessage('error', result.message || 'C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i.');
            }
        }
    } catch (error) {
        console.error('Contact form error:', error);
        showMessage('error', 'Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn server. Vui l√≤ng th·ª≠ l·∫°i sau.');
    } finally {
        // Reset button
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
    }
});

function showMessage(type, message) {
    // Remove existing messages
    const existingMessage = document.querySelector('.contact-message');
    if (existingMessage) {
        existingMessage.remove();
    }
    
    // Create message element
    const messageDiv = document.createElement('div');
    messageDiv.className = `contact-message ${type}`;
    messageDiv.innerHTML = `
        <div class="message-content">
            <span class="message-icon">${type === 'success' ? '‚úÖ' : '‚ùå'}</span>
            <span class="message-text">${message}</span>
        </div>
        <button class="message-close" onclick="this.parentElement.remove()">√ó</button>
    `;
    
    // Insert after form
    const form = document.getElementById('contactForm');
    form.parentNode.insertBefore(messageDiv, form.nextSibling);
    
    // Auto remove after 10 seconds for success messages
    if (type === 'success') {
        setTimeout(() => {
            if (messageDiv.parentNode) {
                messageDiv.remove();
            }
        }, 10000);
    }
}

// Real-time validation
document.querySelectorAll('#contactForm input, #contactForm textarea').forEach(field => {
    field.addEventListener('blur', function() {
        validateField(this);
    });
    
    field.addEventListener('input', function() {
        // Remove error state on input
        this.classList.remove('error');
        const errorMsg = this.parentNode.querySelector('.field-error');
        if (errorMsg) {
            errorMsg.remove();
        }
    });
});

function validateField(field) {
    const value = field.value.trim();
    let isValid = true;
    let errorMessage = '';
    
    switch(field.name) {
        case 'name':
            if (value.length < 2) {
                isValid = false;
                errorMessage = 'T√™n ph·∫£i c√≥ √≠t nh·∫•t 2 k√Ω t·ª±';
            }
            break;
        case 'email':
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(value)) {
                isValid = false;
                errorMessage = 'Email kh√¥ng h·ª£p l·ªá';
            }
            break;
        case 'message':
            if (value.length < 10) {
                isValid = false;
                errorMessage = 'Tin nh·∫Øn ph·∫£i c√≥ √≠t nh·∫•t 10 k√Ω t·ª±';
            }
            break;
    }
    
    if (!isValid) {
        field.classList.add('error');
        showFieldError(field, errorMessage);
    }
    
    return isValid;
}

function showFieldError(field, message) {
    // Remove existing error
    const existingError = field.parentNode.querySelector('.field-error');
    if (existingError) {
        existingError.remove();
    }
    
    // Add new error
    const errorDiv = document.createElement('div');
    errorDiv.className = 'field-error';
    errorDiv.textContent = message;
    field.parentNode.appendChild(errorDiv);
}
</script>
{{ end }}
